<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù…ØªØ¬Ø± Ù…Ù†Ø°Ø±</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff9800">

<style>
:root{
--main-orange:#ff9800;
--main-orange-dark:#f57c00;
--card-bg:#1e1e1e;
}
body{
margin:0;
font-family:Tahoma, Arial;
direction:rtl;
background:linear-gradient(160deg,#0f0f0f,#1a1a1a);
color:white;
}
.header{
background:linear-gradient(90deg,var(--main-orange),var(--main-orange-dark));
padding:20px;
text-align:center;
font-size:24px;
font-weight:bold;
color:black;
}
.section{display:none;padding:25px;text-align:center;}
.bigBtn{
padding:18px;
font-size:18px;
border:none;
border-radius:14px;
background:linear-gradient(145deg,var(--main-orange),var(--main-orange-dark));
color:black;
font-weight:bold;
cursor:pointer;
margin:8px;
width:90%;
}
.smallBtn{
background:var(--main-orange);
border:none;
padding:8px 12px;
margin-top:8px;
border-radius:8px;
font-weight:bold;
cursor:pointer;
color:black;
}
#categories{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:15px;
margin-bottom:20px;
}
.categoryBtn{
background:linear-gradient(145deg,var(--main-orange),var(--main-orange-dark));
color:black;
border:none;
border-radius:20px;
font-weight:bold;
cursor:pointer;
height:120px;
}
.product-grid{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:15px;
}
.product-card{
background:var(--card-bg);
padding:12px;
border-radius:12px;
}
.product-card img{
width:100%;
height:110px;
object-fit:cover;
border-radius:8px;
}
input,select{
width:95%;
padding:10px;
margin:6px 0;
border-radius:8px;
border:none;
background:#2a2a2a;
color:white;
}
</style>
</head>

<body>

<div class="header" id="topHeader">ğŸ›’ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø± Ù…Ù†Ø°Ø±</div>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="home" class="section">
<h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø± Ù…Ù†Ø°Ø±</h2>

<button class="bigBtn" onclick="showSection('ownerLogin')">
ØµØ§Ø­Ø¨ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
</button>

<button class="bigBtn" onclick="showSection('customer')">
Ø§Ù„Ù…Ø´ØªØ±ÙŠ
</button>

<br><br>

<button id="installBtn" class="bigBtn" style="display:none;">
ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
</button>

</div>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ -->
<div id="ownerLogin" class="section">
<h3>Ø¯Ø®ÙˆÙ„ ØµØ§Ø­Ø¨ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬</h3>
<input type="password" id="ownerPassword" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
<button class="bigBtn" onclick="checkPassword()">Ø¯Ø®ÙˆÙ„</button>
<button class="smallBtn" onclick="showSection('home')">Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… -->
<div id="owner" class="section">
<h3>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>

<input type="text" id="storeName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ØªØ¬Ø±">
<input type="text" id="welcomeText" placeholder="Ù†Øµ Ø§Ù„ØªØ±Ø­ÙŠØ¨">
<input type="text" id="buyerPhone" placeholder="Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨ 01xxxxxxxxx">

<h4>Ø¥Ø¶Ø§ÙØ© ØªØµÙ†ÙŠÙ</h4>
<input type="text" id="categoryName">
<button class="smallBtn" onclick="addCategory()">Ø¥Ø¶Ø§ÙØ©</button>

<h4>Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</h4>
<select id="categorySelect"></select>
<input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
<input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
<input type="file" id="productImgFile">
<img id="preview" style="width:80px;margin-top:5px;">
<button class="smallBtn" onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>

<br><br>
<button class="bigBtn" onclick="saveData()">Ø­ÙØ¸</button>
<button class="smallBtn" onclick="showSection('home')">Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠ -->
<div id="customer" class="section">
<h2 id="custStoreName"></h2>
<div id="categories"></div>
<div class="product-grid" id="products"></div>

<h3>Ø§Ù„Ø³Ù„Ø©</h3>
<div id="cart"></div>

<button class="bigBtn" onclick="checkout()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ ÙˆØ§ØªØ³Ø§Ø¨</button>
</div>

<script>

const OWNER_PASSWORD="011507865";

let store=JSON.parse(localStorage.getItem("store"))||{
name:"Ù…ØªØ¬Ø± Ù…Ù†Ø°Ø±",
welcome:"Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…ØªØ¬Ø± Ù…Ù†Ø°Ø±",
buyerPhone:"",
categories:[]
};

let cart=[];

function showSection(id){
document.querySelectorAll(".section").forEach(s=>s.style.display="none");
document.getElementById(id).style.display="block";
if(id==="owner")loadOwner();
if(id==="customer")loadCustomer();
}

function checkPassword(){
if(document.getElementById("ownerPassword").value===OWNER_PASSWORD){
showSection("owner");
}else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø·Ø£");
}

function saveData(){
store.name=document.getElementById("storeName").value;
store.welcome=document.getElementById("welcomeText").value;
store.buyerPhone=document.getElementById("buyerPhone").value;
localStorage.setItem("store",JSON.stringify(store));
alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
}

function loadOwner(){
document.getElementById("storeName").value=store.name;
document.getElementById("welcomeText").value=store.welcome;
document.getElementById("buyerPhone").value=store.buyerPhone;
updateCategories();
}

function addCategory(){
let name=document.getElementById("categoryName").value;
if(!name)return;
store.categories.push({name:name,products:[]});
localStorage.setItem("store",JSON.stringify(store));
updateCategories();
}

function updateCategories(){
let sel=document.getElementById("categorySelect");
sel.innerHTML="";
store.categories.forEach((c,i)=>{
sel.innerHTML+=`<option value="${i}">${c.name}</option>`;
});
}

document.getElementById("productImgFile").addEventListener("change",e=>{
const reader=new FileReader();
reader.onload=ev=>{
document.getElementById("preview").src=ev.target.result;
document.getElementById("preview").dataset.src=ev.target.result;
}
reader.readAsDataURL(e.target.files[0]);
});

function addProduct(){
let idx=document.getElementById("categorySelect").value;
let name=document.getElementById("productName").value;
let price=document.getElementById("productPrice").value;
let img=document.getElementById("preview").dataset.src;
if(!name||!price||!img)return alert("Ø§Ù…Ù„Ø£ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
store.categories[idx].products.push({name,price,img});
localStorage.setItem("store",JSON.stringify(store));
alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©");
}

function loadCustomer(){
document.getElementById("custStoreName").innerText=store.name;
let catDiv=document.getElementById("categories");
catDiv.innerHTML="";
store.categories.forEach((c,i)=>{
let btn=document.createElement("button");
btn.className="categoryBtn";
btn.innerText=c.name;
btn.onclick=()=>showProducts(i);
catDiv.appendChild(btn);
});
}

function showProducts(i){
let div=document.getElementById("products");
div.innerHTML="";
store.categories[i].products.forEach((p)=>{
div.innerHTML+=`
<div class="product-card">
<img src="${p.img}">
<b>${p.name}</b><br>
${p.price} Ø±ÙŠØ§Ù„<br>
<button class="smallBtn" onclick="addToCart('${p.name}',${p.price})">Ø£Ø¶Ù</button>
</div>
`;
});
}

function addToCart(name,price){
cart.push({name,price});
updateCart();
}

function updateCart(){
let div=document.getElementById("cart");
div.innerHTML="";
let total=0;
cart.forEach(i=>{
total+=parseFloat(i.price);
div.innerHTML+=i.name+" - "+i.price+" Ø±ÙŠØ§Ù„<br>";
});
div.innerHTML+="<b>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: "+total+" Ø±ÙŠØ§Ù„</b>";
}

function checkout(){
if(cart.length===0)return alert("Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©");
let total
